<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.262">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<title>RTVS Geography Extras - CHSA</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light"><script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script><script src="site_libs/htmlwidgets-1.5.4/htmlwidgets.js"></script><script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><link href="site_libs/leaflet-1.3.1/leaflet.css" rel="stylesheet">
<script src="site_libs/leaflet-1.3.1/leaflet.js"></script><link href="site_libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet">
<script src="site_libs/proj4-2.6.2/proj4.min.js"></script><script src="site_libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script><link href="site_libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet">
<script src="site_libs/leaflet-binding-2.1.1/leaflet.js"></script><script src="site_libs/leaflet-providers-1.9.0/leaflet-providers_1.9.0.js"></script><script src="site_libs/leaflet-providers-plugin-2.1.1/leaflet-providers-plugin.js"></script><link href="site_libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">
<script src="site_libs/datatables-binding-0.26/datatables.js"></script><link href="site_libs/dt-core-1.12.1/css/jquery.dataTables.min.css" rel="stylesheet">
<link href="site_libs/dt-core-1.12.1/css/jquery.dataTables.extra.css" rel="stylesheet">
<script src="site_libs/dt-core-1.12.1/js/jquery.dataTables.min.js"></script><link href="site_libs/nouislider-7.0.10/jquery.nouislider.min.css" rel="stylesheet">
<script src="site_libs/nouislider-7.0.10/jquery.nouislider.min.js"></script><link href="site_libs/selectize-0.12.0/selectize.bootstrap3.css" rel="stylesheet">
<script src="site_libs/selectize-0.12.0/selectize.min.js"></script><link href="site_libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet">
<script src="site_libs/crosstalk-1.2.0/js/crosstalk.min.js"></script><link rel="stylesheet" href="styles.css">
</head>
<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="navbar navbar-expand-lg navbar-dark "><div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">RTVS Geography Extras</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
<li class="nav-item">
    <a class="nav-link" href="./index.html">
 <span class="menu-text">Overview</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="./chsa.html" aria-current="page">
 <span class="menu-text">CHSA</span></a>
  </li>  
</ul>
<div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">On this page</h2>
   
  <ul>
<li><a href="#base-map" id="toc-base-map" class="nav-link active" data-scroll-target="#base-map">Base Map</a></li>
  <li>
<a href="#interactive-map" id="toc-interactive-map" class="nav-link" data-scroll-target="#interactive-map">Interactive Map</a>
  <ul class="collapse">
<li><a href="#chsa-table" id="toc-chsa-table" class="nav-link" data-scroll-target="#chsa-table">CHSA Table</a></li>
  </ul>
</li>
  <li><a href="#chsa-to-hospital-distances" id="toc-chsa-to-hospital-distances" class="nav-link" data-scroll-target="#chsa-to-hospital-distances">CHSA to Hospital Distances</a></li>
  </ul></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title">CHSA</h1><button type="button" class="btn code-tools-button dropdown-toggle" id="quarto-code-tools-menu" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi"></i> Code</button><ul class="dropdown-menu dropdown-menu-end" aria-labelelledby="quarto-code-tools-menu"><li><a id="quarto-show-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Show All Code</a></li><li><a id="quarto-hide-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Hide All Code</a></li><li><hr class="dropdown-divider"></li><li><a id="quarto-view-source" class="dropdown-item" href="javascript:void(0)" role="button">View Source</a></li></ul></div></div>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header><section id="base-map" class="level2"><h2 class="anchored" data-anchor-id="base-map">Base Map</h2>
<div class="cell">
<details><summary>Code</summary><div class="sourceCode" id="cb1"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># transform CHSA map projection</span></span>
<span><span class="va">chsa</span> <span class="op">&lt;-</span> <span class="fu">st_transform</span><span class="op">(</span><span class="va">chsa</span>, crs <span class="op">=</span> <span class="st">'WGS84'</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># plot</span></span>
<span><span class="fu">ggplot</span><span class="op">(</span><span class="va">chsa</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_sf</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>fill <span class="op">=</span> <span class="va">HA_Name</span>, alpha <span class="op">=</span> <span class="va">CHSA_Pop16</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span><span class="op">(</span><span class="va">CHSA_Pop16</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme_minimal</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">labs</span><span class="op">(</span>fill <span class="op">=</span> <span class="st">'Health Authority'</span>, alpha <span class="op">=</span> <span class="st">'Population'</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">scale_fill_brewer</span><span class="op">(</span>palette <span class="op">=</span> <span class="st">'Dark2'</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div id="fig-base-map" class="quarto-figure quarto-figure-center anchored">
<figure class="figure"><p><img src="chsa_files/figure-html/fig-base-map-1.png" class="img-fluid figure-img" width="672"></p>
<p></p><figcaption class="figure-caption">Figure&nbsp;1: CHSA base map using ggplot</figcaption><p></p>
</figure>
</div>
</div>
</div>
</section><section id="interactive-map" class="level2"><h2 class="anchored" data-anchor-id="interactive-map">Interactive Map</h2>
<div class="cell">
<details><summary>Code</summary><div class="sourceCode" id="cb2"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co">### data prep</span></span>
<span></span>
<span><span class="co"># remove extra row for surrey memorial pediatric unit</span></span>
<span><span class="va">hosp</span> <span class="op">&lt;-</span> <span class="va">hosp</span> <span class="op">%&gt;%</span> <span class="fu">group_by</span><span class="op">(</span><span class="va">Facility</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu">slice</span><span class="op">(</span><span class="fl">1</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu">ungroup</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># labels for leaflet mapping</span></span>
<span><span class="va">hosp_labs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sprintf.html">sprintf</a></span><span class="op">(</span><span class="st">"%s"</span>, <span class="va">hosp</span><span class="op">$</span><span class="va">Facility</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html">lapply</a></span><span class="op">(</span><span class="fu">htmltools</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/pkg/htmltools/man/HTML.html">HTML</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># add leaflet colour palette based on health authority</span></span>
<span><span class="va">chsa_pal</span> <span class="op">&lt;-</span> <span class="fu">colorFactor</span><span class="op">(</span><span class="st">'RdYlBu'</span>, <span class="va">chsa</span><span class="op">$</span><span class="va">HA_ID</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># labels leaflet for mapping</span></span>
<span><span class="va">chsa_labels</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sprintf.html">sprintf</a></span><span class="op">(</span><span class="st">"%s (%s)"</span>, <span class="va">chsa</span><span class="op">$</span><span class="va">CHSA_Title</span>, <span class="va">chsa</span><span class="op">$</span><span class="va">HA_Name</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/lapply.html">lapply</a></span><span class="op">(</span><span class="fu">htmltools</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/pkg/htmltools/man/HTML.html">HTML</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co">### plot CHSA shapes plus hospitals</span></span>
<span></span>
<span><span class="fu">leaflet</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">addTiles</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">addProviderTiles</span><span class="op">(</span><span class="va">providers</span><span class="op">$</span><span class="va">CartoDB.Positron</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="co">## some arguments are not working...</span></span>
<span>  <span class="co"># addPolygons(data = chsa,</span></span>
<span>  <span class="co">#             fillColor = ~chsa_pal(HA_ID),</span></span>
<span>  <span class="co">#             stroke = T, weight = 1,</span></span>
<span>  <span class="co">#             opacity = 10, color = "#666", dashArray = "1", fillOpacity = 0.1,</span></span>
<span>  <span class="co">#             label = chsa_labels,</span></span>
<span>  <span class="co">#             highlight = highlightOptions(</span></span>
<span>  <span class="co">#               weight = 1.5, color = "black", dashArray = "",fillOpacity = 0.3,</span></span>
<span>  <span class="co">#               bringToFront = F)</span></span>
<span>  <span class="co">#             ) %&gt;%</span></span>
<span>  <span class="co">## add circles after polygons so that they are plotted on top</span></span>
<span>  <span class="fu">addCircles</span><span class="op">(</span>data <span class="op">=</span> <span class="va">hosp</span>, <span class="op">~</span><span class="va">LONGITUDE</span>, <span class="op">~</span><span class="va">LATITUDE</span>,</span>
<span>             label <span class="op">=</span> <span class="op">~</span><span class="va">hosp_labs</span>, popup <span class="op">=</span> <span class="op">~</span><span class="va">hosp_labs</span>,</span>
<span>             opacity <span class="op">=</span> <span class="fl">1</span>, radius <span class="op">=</span> <span class="fl">10</span>, stroke <span class="op">=</span> <span class="cn">T</span>,</span>
<span>             highlightOptions <span class="op">=</span> <span class="fu">highlightOptions</span><span class="op">(</span>bringToFront <span class="op">=</span> <span class="cn">T</span><span class="op">)</span></span>
<span>             <span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div id="fig-interactive-CHSA" class="quarto-figure quarto-figure-center anchored">
<figure class="figure"><div id="htmlwidget-5a39bcdc30ea770b5b5e" style="width:100%;height:464px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-5a39bcdc30ea770b5b5e">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addTiles","args":["https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",null,null,{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false,"attribution":"&copy; <a href=\"https://openstreetmap.org\">OpenStreetMap<\/a> contributors, <a href=\"https://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA<\/a>"}]},{"method":"addProviderTiles","args":["CartoDB.Positron",null,null,{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addCircles","args":[[51.638711,49.038152,52.085559,50.238724,50.734772,59.574828,51.180406,49.246175,52.372895,49.030363,54.784976,49.248776,52.137421,49.314395,50.818238,55.695973,49.165763,50.583656,48.785009,49.098702,55.749057,49.08461,51.646945,49.283374,49.512483,49.77841,49.51284,50.021306,58.809101,56.256892,49.376899,54.059109,52.981739,49.78125,51.296527,53.254868,56.026604,50.506441,49.873281,54.050409,49.10318,49.495025,48.861445,54.235568,49.093175,50.689254,49.320214,55.33812,53.300909,54.510843,49.135186,49.257699,49.183502,50.121468,50.011132,49.712428,54.012317,49.029793,50.32076,49.482657,50.4255,50.720244,50.58026,49.851072,54.304265,49.453436,50.976799,52.160187,49.170162,49.214787,49.22679,50.671418,48.434061,48.594199,49.475307,50.704586,49.984216,49.184285,49.20514,49.721453,49.700092,50.234313,54.02876,49.280614,55.939636,58.441804,54.442987,49.177003,49.913388,49.151591,55.125373,53.911251,52.83206,49.262412,50.256925,48.466809,49.913883,51.898899,49.248801,50.120463,55.259655,49.989011],[-121.292384,-122.313003,-123.275914,-117.794638,-121.280163,-133.704315,-120.125113,-123.121258,-126.762576,-118.467838,-127.163822,-123.016837,-122.143656,-117.659998,-119.68568,-121.64632,-121.962422,-126.926661,-123.723323,-116.508309,-120.237333,-123.059929,-120.018229,-122.823597,-115.748688,-118.146151,-115.0566,-114.918185,-122.703101,-120.817122,-121.424345,-124.849774,-122.498817,-126.048774,-116.966604,-132.070526,-121.914866,-116.032224,-119.491273,-128.647481,-117.70147,-117.284817,-123.508599,-125.760016,-122.613957,-121.939063,-123.068318,-123.101288,-120.16308,-128.596516,-122.331733,-123.096358,-123.969945,-120.771016,-125.243155,-124.969565,-132.151708,-122.793632,-122.804482,-119.578687,-127.487219,-127.503215,-127.067379,-124.520727,-130.332179,-120.526235,-118.191902,-128.143874,-123.147547,-122.631951,-122.892844,-120.334025,-123.326541,-123.411323,-123.749159,-119.274422,-117.373941,-119.53841,-119.831731,-114.892672,-123.140086,-121.580874,-124.008821,-123.128913,-129.990761,-129.992101,-124.245474,-122.842316,-126.663244,-125.908605,-121.00198,-122.763153,-119.270254,-123.124725,-119.273751,-123.432576,-116.914089,-124.583244,-124.781792,-122.954906,-127.651295,-126.851068],10,null,null,{"interactive":true,"className":"","stroke":true,"color":"#03F","weight":5,"opacity":1,"fill":true,"fillColor":"#03F","fillOpacity":0.2},["100 Mile District General Hospital","Abbotsford Regional Hospital and Cancer Centre","Alexis Creek Health Centre","Arrow Lakes Hospital","Ashcroft Hospital and Community Health Care Centre","Atlin Health Centre","Barriere Health Centre","BC Children's Hospital","Bella Coola General Hospital","Boundary District Hospital","Bulkley Valley District Hospital","Burnaby Hospital","Cariboo Memorial Hospital and Health Centre","Castlegar and District Community Health Centre","Chase Health Centre","Chetwynd Hospital and Health Centre","Chilliwack General Hospital","Cormorant Island Community Health Centre","Cowichan District Hospital","Creston Valley Hospital and Health Centre","Dawson Creek and District Hospital","Delta Hospital","Dr. Helmcken Memorial Hospital","Eagle Ridge Hospital","East Kootenay Regional Hospital","Edgewood Health Centre","Elk Valley Hospital","Elkford Health Centre","Fort Nelson General Hospital","Fort St. John Hospital","Fraser Canyon Hospital","Fraser Lake Community Health Centre","G.R. Baker Memorial Hospital","Gold River Health Centre","Golden and District Hospital","Haida Gwaii Hospital and Health Centre","Hudson's Hope Health Centre","Invermere and District Hospital","Kelowna General Hospital","Kitimat General Hospital and Health Centre","Kootenay Boundary Regional Hospital","Kootenay Lake Hospital","Lady Minto/Gulf Islands Hospital","Lakes District Hospital and Health Centre","Langley Memorial Hospital","Lillooet Hospital and Health Centre","Lions Gate Hospital","Mackenzie and District Hospital and Health Centre","McBride and District Hospital","Mills Memorial Hospital","Mission Memorial Hospital","Mount Saint Joseph Hospital","Nanaimo Regional General Hospital","Nicola Valley Hospital and Health Centre","North Island Hospital Campbell River and District","North Island Hospital Comox Valley","Northern Haida Gwaii Hospital and Health Centre","Peace Arch Hospital","Pemberton Health Centre","Penticton Regional Hospital","Port Alice Health Centre","Port Hardy Hospital","Port McNeill Hospital","Powell River General Hospital","Prince Rupert Regional Hospital","Princeton General Hospital","Queen Victoria Hospital and Health Centre","R.W. Large Memorial Hospital","Richmond Hospital","Ridge Meadows Hospital","Royal Columbian Hospital","Royal Inland Hospital","Royal Jubilee Hospital","Saanich Peninsula Hospital","Sechelt Hospital","Shuswap Lake General Hospital","Slocan Community Health Centre","South Okanagan General Hospital","South Similkameen Health Centre","Sparwood Primary Healthcare Centre","Squamish General Hospital","St. Bartholomew's Health Centre","St. John Hospital","St. Paul's Hospital - Burrard Building","Stewart Health Centre","Stikine Health Centre","Stuart Lake Hospital","Surrey Memorial Hospital","Tahsis Health Centre","Tofino General Hospital","Tumbler Ridge Health Centre","University Hospital of Northern British Columbia","Valemount Health Centre","Vancouver General Hospital - Jim Pattison Pavilion, Emergency Department","Vernon Jubilee Hospital","Victoria General Hospital","Victorian Community Health Centre","West Chilcotin Health Centre","West Coast General Hospital","Whistler Health Care Centre","Wrinch Memorial Hospital","Zeballos Health Centre"],null,["100 Mile District General Hospital","Abbotsford Regional Hospital and Cancer Centre","Alexis Creek Health Centre","Arrow Lakes Hospital","Ashcroft Hospital and Community Health Care Centre","Atlin Health Centre","Barriere Health Centre","BC Children's Hospital","Bella Coola General Hospital","Boundary District Hospital","Bulkley Valley District Hospital","Burnaby Hospital","Cariboo Memorial Hospital and Health Centre","Castlegar and District Community Health Centre","Chase Health Centre","Chetwynd Hospital and Health Centre","Chilliwack General Hospital","Cormorant Island Community Health Centre","Cowichan District Hospital","Creston Valley Hospital and Health Centre","Dawson Creek and District Hospital","Delta Hospital","Dr. Helmcken Memorial Hospital","Eagle Ridge Hospital","East Kootenay Regional Hospital","Edgewood Health Centre","Elk Valley Hospital","Elkford Health Centre","Fort Nelson General Hospital","Fort St. John Hospital","Fraser Canyon Hospital","Fraser Lake Community Health Centre","G.R. Baker Memorial Hospital","Gold River Health Centre","Golden and District Hospital","Haida Gwaii Hospital and Health Centre","Hudson's Hope Health Centre","Invermere and District Hospital","Kelowna General Hospital","Kitimat General Hospital and Health Centre","Kootenay Boundary Regional Hospital","Kootenay Lake Hospital","Lady Minto/Gulf Islands Hospital","Lakes District Hospital and Health Centre","Langley Memorial Hospital","Lillooet Hospital and Health Centre","Lions Gate Hospital","Mackenzie and District Hospital and Health Centre","McBride and District Hospital","Mills Memorial Hospital","Mission Memorial Hospital","Mount Saint Joseph Hospital","Nanaimo Regional General Hospital","Nicola Valley Hospital and Health Centre","North Island Hospital Campbell River and District","North Island Hospital Comox Valley","Northern Haida Gwaii Hospital and Health Centre","Peace Arch Hospital","Pemberton Health Centre","Penticton Regional Hospital","Port Alice Health Centre","Port Hardy Hospital","Port McNeill Hospital","Powell River General Hospital","Prince Rupert Regional Hospital","Princeton General Hospital","Queen Victoria Hospital and Health Centre","R.W. Large Memorial Hospital","Richmond Hospital","Ridge Meadows Hospital","Royal Columbian Hospital","Royal Inland Hospital","Royal Jubilee Hospital","Saanich Peninsula Hospital","Sechelt Hospital","Shuswap Lake General Hospital","Slocan Community Health Centre","South Okanagan General Hospital","South Similkameen Health Centre","Sparwood Primary Healthcare Centre","Squamish General Hospital","St. Bartholomew's Health Centre","St. John Hospital","St. Paul's Hospital - Burrard Building","Stewart Health Centre","Stikine Health Centre","Stuart Lake Hospital","Surrey Memorial Hospital","Tahsis Health Centre","Tofino General Hospital","Tumbler Ridge Health Centre","University Hospital of Northern British Columbia","Valemount Health Centre","Vancouver General Hospital - Jim Pattison Pavilion, Emergency Department","Vernon Jubilee Hospital","Victoria General Hospital","Victorian Community Health Centre","West Chilcotin Health Centre","West Coast General Hospital","Whistler Health Care Centre","Wrinch Memorial Hospital","Zeballos Health Centre"],{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},{"bringToFront":true},null]}],"limits":{"lat":[48.434061,59.574828],"lng":[-133.704315,-114.892672]}},"evals":[],"jsHooks":[]}</script><p></p><figcaption class="figure-caption">Figure&nbsp;2: CHSA and hospital map</figcaption><p></p>
</figure>
</div>
</div>
<section id="chsa-table" class="level3"><h3 class="anchored" data-anchor-id="chsa-table">CHSA Table</h3>
<div class="cell">
<details><summary>Code</summary><div class="sourceCode" id="cb3"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">chsa</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">CHSA_Name</span>, <span class="va">HA_Name</span>, <span class="va">CHSA_Pop16</span>, <span class="va">CHSA_UR_Cl</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">as_tibble</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="op">-</span><span class="va">geometry</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">datatable</span><span class="op">(</span>filter <span class="op">=</span> <span class="st">'top'</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">

<div id="htmlwidget-94eb879410071fd052c1" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-94eb879410071fd052c1">{"x":{"filter":"top","vertical":false,"filterHTML":"<tr>\n  <td><\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"integer\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"421\" data-max=\"81414\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n<\/tr>","data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99","100","101","102","103","104","105","106","107","108","109","110","111","112","113","114","115","116","117","118","119","120","121","122","123","124","125","126","127","128","129","130","131","132","133","134","135","136","137","138","139","140","141","142","143","144","145","146","147","148","149","150","151","152","153","154","155","156","157","158","159","160","161","162","163","164","165","166","167","168","169","170","171","172","173","174","175","176","177","178","179","180","181","182","183","184","185","186","187","188","189","190","191","192","193","194","195","196","197","198","199","200","201","202","203","204","205","206","207","208","209","210","211","212","213","214","215","216","217","218"],["Fernie","Cranbrook","Kimberley","Windermere","Creston","Golden","Kootenay Lake","Nelson","Castlegar","Arrow Lakes","Trail","Grand Forks","Kettle Valley","Southern Okanagan","Penticton","Keremeos","Princeton","Armstrong/Spallumcheen","Vernon Centre/Coldstream","North Okanagan/Lumby","Central Okanagan Rural","West Kelowna","Lake Country","Glenmore","Downtown Kelowna","Rutland","Okanagan Mission","Summerland","Enderby","Revelstoke","Salmon Arm","Kamloops Centre North","Kamloops Centre South","Lower Thompson","100 Mile House","North Thompson","Williams Lake/East Cariboo","Lillooet","South Cariboo","Merritt","Hope","South Chilliwack","North Chilliwack","Central Abbotsford","East Abbotsford","West Abbotsford","Abbotsford Rural","North Mission","Agassiz/Harrison","New Westminster","Burnaby Northwest","Burnaby Northeast","Burnaby Southwest","Burnaby Southeast","Haney","Pitt Meadows","Maple Ridge Rural","North Coquitlam","Southwest Coquitlam","Port Coquitlam","Port Moody/Anmore/Belcarra","City of Langley","Willoughby","Brookswood/Murrayville","Aldergrove/Otter","North Langley Township","South Langley Township","North Delta","Tsawwassen","North Surrey","Cloverdale","Panorama","East Newton","Fleetwood","Guildford","West Newton","South Surrey","White Rock","Richmond City Centre","Blundell","Broadmoor","Steveston","East and West Cambie/Bridgeport","Downtown Vancouver","West End","Fairview","Downtown Eastside","Northeast False Creek","Grandview-Woodland","Cedar Cottage","Hastings-Sunrise","Renfrew-Collingwood","Shaughnessy/Arbutus Ridge/Kerrisdale","West Point Grey/Dunbar-Southlands","University of British Columbia","Kitsilano","Kensington","Mount Pleasant","South Cambie/Riley Park","Killarney","Oakridge/Marpole","Sunset","Victoria-Fraserview","North Vancouver City - East","North Vancouver City - West","North Vancouver DM - Central","North Vancouver DM - East","North Vancouver DM - West","West Vancouver - Lower","Bowen Island/Lions Bay","Gibsons","Sechelt","Powell River City","qathet Rural","Squamish","Whistler","Howe Sound Rural","Bella Coola Valley","Central Coast","Downtown Victoria/Vic West","Esquimalt","Gordon Head/Shelbourne","James Bay/Fairfield","Oak Bay","Oaklands/Fernwood","Quadra/Swan Lake","Interurban/Tillicum","View Royal","Colwood","Metchosin","Langford/Highlands","Sooke","Juan de Fuca Coast","Royal Oak/Cordova Bay/Prospect","Central Saanich","North Saanich","Sidney","Salt Spring Island","Pender/Galiano/Saturna/Mayne","South Cowichan","Central Cowichan","Cowichan Valley West","Chemainus","Penelakut and Thetis Islands","Downtown Nanaimo","Departure Bay","Nanaimo North/Lantzville","Nanaimo South","Nanaimo West/Rural","Cedar/Wellington","Gabriola Island","Parksville","Qualicum Beach","Oceanside Rural","Port Alberni","Alberni Valley/Bamfield","West Coast","Comox","Comox Valley Rural","Campbell River","Port McNeill/Sointula","Haida Gwaii South","Haida Gwaii North","Prince Rupert City Centre","Upper Skeena","Smithers Town Centre","Smithers Rural","Houston","Kitimat","Stikine","Terrace City Centre","Terrace Rural","Telegraph Creek","Quesnel City Centre","Quesnel Rural","Burns Lake Town Centre","Burns Lake South","Burns Lake North","Vanderhoof","Vanderhoof Rural","Fort St. James North","Fraser Lake","Prince George City - North","Prince George City - Central","Prince George City - Southwest","McBride/Valemount","Prince George North Fraser Rural","Prince George Southwest Rural","Dawson Creek","Chetwynd","Tumbler Ridge","Peace River South Rural","Fort St John","Hudson's Hope","Peace River North Rural","Fort Nelson Population Centre","Northern Boreal","Vancouver Island West","Thompson/Seafair","Ladner","Walnut Grove/Fort Langley","South Mission","Ladysmith Rural","Port Hardy/Port Alice","Snow Country","Whalley","Southeast Coquitlam","Gilmore/Shellmont/East/Hamilton","Courtenay","West Cariboo","West Vancouver - Upper","Vancouver Island North Remote","Nisga'a","Mackenzie","Ladysmith","Sunshine Coast Rural","Prince Rupert Rural","Campbell River Rural"],["Interior","Interior","Interior","Interior","Interior","Interior","Interior","Interior","Interior","Interior","Interior","Interior","Interior","Interior","Interior","Interior","Interior","Interior","Interior","Interior","Interior","Interior","Interior","Interior","Interior","Interior","Interior","Interior","Interior","Interior","Interior","Interior","Interior","Interior","Interior","Interior","Interior","Interior","Interior","Interior","Fraser","Fraser","Fraser","Fraser","Fraser","Fraser","Fraser","Fraser","Fraser","Fraser","Fraser","Fraser","Fraser","Fraser","Fraser","Fraser","Fraser","Fraser","Fraser","Fraser","Fraser","Fraser","Fraser","Fraser","Fraser","Fraser","Fraser","Fraser","Fraser","Fraser","Fraser","Fraser","Fraser","Fraser","Fraser","Fraser","Fraser","Fraser","Vancouver Coastal","Vancouver Coastal","Vancouver Coastal","Vancouver Coastal","Vancouver Coastal","Vancouver Coastal","Vancouver Coastal","Vancouver Coastal","Vancouver Coastal","Vancouver Coastal","Vancouver Coastal","Vancouver Coastal","Vancouver Coastal","Vancouver Coastal","Vancouver Coastal","Vancouver Coastal","Vancouver Coastal","Vancouver Coastal","Vancouver Coastal","Vancouver Coastal","Vancouver Coastal","Vancouver Coastal","Vancouver Coastal","Vancouver Coastal","Vancouver Coastal","Vancouver Coastal","Vancouver Coastal","Vancouver Coastal","Vancouver Coastal","Vancouver Coastal","Vancouver Coastal","Vancouver Coastal","Vancouver Coastal","Vancouver Coastal","Vancouver Coastal","Vancouver Coastal","Vancouver Coastal","Vancouver Coastal","Vancouver Coastal","Vancouver Coastal","Vancouver Coastal","Vancouver Island","Vancouver Island","Vancouver Island","Vancouver Island","Vancouver Island","Vancouver Island","Vancouver Island","Vancouver Island","Vancouver Island","Vancouver Island","Vancouver Island","Vancouver Island","Vancouver Island","Vancouver Island","Vancouver Island","Vancouver Island","Vancouver Island","Vancouver Island","Vancouver Island","Vancouver Island","Vancouver Island","Vancouver Island","Vancouver Island","Vancouver Island","Vancouver Island","Vancouver Island","Vancouver Island","Vancouver Island","Vancouver Island","Vancouver Island","Vancouver Island","Vancouver Island","Vancouver Island","Vancouver Island","Vancouver Island","Vancouver Island","Vancouver Island","Vancouver Island","Vancouver Island","Vancouver Island","Vancouver Island","Vancouver Island","Northern","Northern","Northern","Northern","Northern","Northern","Northern","Northern","Northern","Northern","Northern","Northern","Northern","Northern","Northern","Northern","Northern","Northern","Northern","Northern","Northern","Northern","Northern","Northern","Northern","Northern","Northern","Northern","Northern","Northern","Northern","Northern","Northern","Northern","Northern","Northern","Vancouver Island","Vancouver Coastal","Fraser","Fraser","Fraser","Vancouver Island","Vancouver Island","Northern","Fraser","Fraser","Vancouver Coastal","Vancouver Island","Interior","Vancouver Coastal","Vancouver Island","Northern","Northern","Vancouver Island","Vancouver Coastal","Northern","Vancouver Island"],[15531,26248,9178,9487,12634,6851,3209,25523,13710,4501,19367,8611,3469,19231,41799,5101,4781,10220,53266,13583,8720,41482,12922,33401,38661,34796,24900,12110,7285,8085,33648,44714,48587,19986,14112,4050,22165,4012,6548,10855,8129,51241,41936,22754,35584,58511,24836,16854,9696,70996,47161,45434,81414,58746,30824,18835,51442,40842,70406,58612,36404,25888,31567,22090,13204,12653,8789,56017,22225,51161,69963,45391,62748,58701,60538,41463,74816,19952,54587,17729,23478,24774,24621,41934,47203,32904,19960,12392,29180,18027,34575,51292,37993,34483,15890,42812,31755,32807,31246,29561,37453,36496,31065,19230,34244,29808,29271,28839,19412,5086,8269,10862,13157,6514,19893,11854,6906,2678,1514,31290,19497,38257,32057,18094,22445,24167,29704,10408,16859,4837,37985,14894,2885,22020,19325,11675,11672,10557,4732,17780,40598,6240,6037,851,20117,25680,30045,14529,7502,7058,4033,13260,8943,24930,21118,4329,5534,21744,19623,33465,3021,2323,1875,12220,4223,6182,6786,3446,9090,1033,11977,8273,595,9987,13218,2065,1740,2451,4439,3996,4558,2864,16947,41431,15730,3223,5486,7847,12198,2503,1987,10162,20155,1015,14351,3796,1718,1901,32171,24822,29587,26303,3676,6456,421,53402,28129,20949,25160,2650,25992,1758,1880,4413,8557,10839,1281,9105],["5 Rural Hub","4 Small Urban","6 Rural","6 Rural","6 Rural","6 Rural","6 Rural","6 Rural","5 Rural Hub","6 Rural","4 Small Urban","6 Rural","6 Rural","5 Rural Hub","3 Medium Urban","6 Rural","5 Rural Hub","5 Rural Hub","3 Medium Urban","6 Rural","5 Rural Hub","2 Large Urban","6 Rural","2 Large Urban","2 Large Urban","2 Large Urban","2 Large Urban","5 Rural Hub","6 Rural","5 Rural Hub","4 Small Urban","3 Medium Urban","3 Medium Urban","6 Rural","6 Rural","6 Rural","6 Rural","6 Rural","6 Rural","6 Rural","5 Rural Hub","3 Medium Urban","3 Medium Urban","2 Large Urban","2 Large Urban","2 Large Urban","6 Rural","6 Rural","5 Rural Hub","1 Metropolitan","1 Metropolitan","1 Metropolitan","1 Metropolitan","1 Metropolitan","1 Metropolitan","1 Metropolitan","1 Metropolitan","1 Metropolitan","1 Metropolitan","1 Metropolitan","1 Metropolitan","1 Metropolitan","1 Metropolitan","1 Metropolitan","4 Small Urban","6 Rural","6 Rural","1 Metropolitan","4 Small Urban","1 Metropolitan","1 Metropolitan","1 Metropolitan","1 Metropolitan","1 Metropolitan","1 Metropolitan","1 Metropolitan","3 Medium Urban","3 Medium Urban","1 Metropolitan","1 Metropolitan","1 Metropolitan","1 Metropolitan","1 Metropolitan","1 Metropolitan","1 Metropolitan","1 Metropolitan","1 Metropolitan","1 Metropolitan","1 Metropolitan","1 Metropolitan","1 Metropolitan","1 Metropolitan","1 Metropolitan","1 Metropolitan","1 Metropolitan","1 Metropolitan","1 Metropolitan","1 Metropolitan","1 Metropolitan","1 Metropolitan","1 Metropolitan","1 Metropolitan","1 Metropolitan","1 Metropolitan","1 Metropolitan","1 Metropolitan","1 Metropolitan","1 Metropolitan","1 Metropolitan","6 Rural","5 Rural Hub","5 Rural Hub","4 Small Urban","6 Rural","4 Small Urban","5 Rural Hub","6 Rural","7 Remote","7 Remote","2 Large Urban","2 Large Urban","2 Large Urban","2 Large Urban","2 Large Urban","2 Large Urban","2 Large Urban","2 Large Urban","2 Large Urban","2 Large Urban","6 Rural","2 Large Urban","5 Rural Hub","6 Rural","2 Large Urban","2 Large Urban","2 Large Urban","2 Large Urban","6 Rural","6 Rural","5 Rural Hub","4 Small Urban","6 Rural","5 Rural Hub","6 Rural","3 Medium Urban","3 Medium Urban","3 Medium Urban","3 Medium Urban","6 Rural","6 Rural","6 Rural","4 Small Urban","4 Small Urban","6 Rural","4 Small Urban","6 Rural","7 Remote","3 Medium Urban","6 Rural","3 Medium Urban","5 Rural Hub","7 Remote","7 Remote","4 Small Urban","7 Remote","5 Rural Hub","6 Rural","5 Rural Hub","5 Rural Hub","7 Remote","4 Small Urban","6 Rural","7 Remote","4 Small Urban","6 Rural","5 Rural Hub","7 Remote","6 Rural","6 Rural","6 Rural","6 Rural","6 Rural","3 Medium Urban","3 Medium Urban","3 Medium Urban","7 Remote","6 Rural","6 Rural","4 Small Urban","6 Rural","5 Rural Hub","6 Rural","4 Small Urban","6 Rural","6 Rural","5 Rural Hub","7 Remote","6 Rural","1 Metropolitan","4 Small Urban","1 Metropolitan","3 Medium Urban","6 Rural","5 Rural Hub","7 Remote","1 Metropolitan","1 Metropolitan","1 Metropolitan","3 Medium Urban","7 Remote","1 Metropolitan","7 Remote","7 Remote","5 Rural Hub","4 Small Urban","6 Rural","7 Remote","6 Rural"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>CHSA_Name<\/th>\n      <th>HA_Name<\/th>\n      <th>CHSA_Pop16<\/th>\n      <th>CHSA_UR_Cl<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":3},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false,"orderCellsTop":true}},"evals":[],"jsHooks":[]}</script>
</div>
<details><summary>Code</summary><div class="sourceCode" id="cb4"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># distances %&gt;% </span></span>
<span><span class="co">#   select(CHSA_Name, Facility, distance, duration, HA_Name, CHSA_UR_Cl) %&gt;% </span></span>
<span><span class="co">#   datatable(., filter = 'top')</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section></section><section id="chsa-to-hospital-distances" class="level2"><h2 class="anchored" data-anchor-id="chsa-to-hospital-distances">CHSA to Hospital Distances</h2>
<div class="cell">
<details><summary>Code</summary><div class="sourceCode" id="cb5"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># # correlations - dist v. dur, dist v. CHSA pop/area</span></span>
<span><span class="co"># distances %&gt;% </span></span>
<span><span class="co">#   select(HA_Name, duration, distance, dist.hav, CHSA_Pop16, CHSA_Area) %&gt;% </span></span>
<span><span class="co">#   mutate(CHSA_dens = CHSA_Pop16 / CHSA_Area) %&gt;% </span></span>
<span><span class="co">#   ggpairs(columns = 2:7, mapping = aes(color = HA_Name),</span></span>
<span><span class="co">#           diag = list(continuous = wrap('densityDiag', alpha = 0.3)),</span></span>
<span><span class="co">#           lower = list(continuous = wrap("smooth", alpha = 0.3, size = 0.1, se = F)))</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>


<!-- -->

</section></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb6" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> "CHSA"</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: load-packages-and-data</span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a><span class="co">#| include: false</span></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a><span class="do">### load packages</span></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(plyr, tidyverse, sf, leaflet, fontawesome, GGally, DT)</span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a><span class="do">### load data</span></span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a><span class="co"># hospitals</span></span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>hosp <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">'data/hospitals/hlbc_emergencyrooms.csv'</span>)</span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a><span class="co"># chsa geometry</span></span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a>chsa <span class="ot">&lt;-</span> <span class="fu">st_read</span>(<span class="st">'data/CHSA_2018/CHSA_2018.shp'</span>)</span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-23"><a href="#cb6-23" aria-hidden="true" tabindex="-1"></a><span class="fu">## Base Map</span></span>
<span id="cb6-24"><a href="#cb6-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-27"><a href="#cb6-27" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb6-28"><a href="#cb6-28" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-base-map</span></span>
<span id="cb6-29"><a href="#cb6-29" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: CHSA base map using ggplot</span></span>
<span id="cb6-30"><a href="#cb6-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-31"><a href="#cb6-31" aria-hidden="true" tabindex="-1"></a><span class="co"># transform CHSA map projection</span></span>
<span id="cb6-32"><a href="#cb6-32" aria-hidden="true" tabindex="-1"></a>chsa <span class="ot">&lt;-</span> <span class="fu">st_transform</span>(chsa, <span class="at">crs =</span> <span class="st">'WGS84'</span>)</span>
<span id="cb6-33"><a href="#cb6-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-34"><a href="#cb6-34" aria-hidden="true" tabindex="-1"></a><span class="co"># plot</span></span>
<span id="cb6-35"><a href="#cb6-35" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(chsa) <span class="sc">+</span></span>
<span id="cb6-36"><a href="#cb6-36" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="fu">aes</span>(<span class="at">fill =</span> HA_Name, <span class="at">alpha =</span> CHSA_Pop16 <span class="sc">/</span> <span class="fu">max</span>(CHSA_Pop16))) <span class="sc">+</span></span>
<span id="cb6-37"><a href="#cb6-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb6-38"><a href="#cb6-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">fill =</span> <span class="st">'Health Authority'</span>, <span class="at">alpha =</span> <span class="st">'Population'</span>) <span class="sc">+</span></span>
<span id="cb6-39"><a href="#cb6-39" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">'Dark2'</span>)</span>
<span id="cb6-40"><a href="#cb6-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-41"><a href="#cb6-41" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb6-42"><a href="#cb6-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-43"><a href="#cb6-43" aria-hidden="true" tabindex="-1"></a><span class="fu">## Interactive Map</span></span>
<span id="cb6-44"><a href="#cb6-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-47"><a href="#cb6-47" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb6-48"><a href="#cb6-48" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-interactive-CHSA</span></span>
<span id="cb6-49"><a href="#cb6-49" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: CHSA and hospital map</span></span>
<span id="cb6-50"><a href="#cb6-50" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb6-51"><a href="#cb6-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-52"><a href="#cb6-52" aria-hidden="true" tabindex="-1"></a><span class="do">### data prep</span></span>
<span id="cb6-53"><a href="#cb6-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-54"><a href="#cb6-54" aria-hidden="true" tabindex="-1"></a><span class="co"># remove extra row for surrey memorial pediatric unit</span></span>
<span id="cb6-55"><a href="#cb6-55" aria-hidden="true" tabindex="-1"></a>hosp <span class="ot">&lt;-</span> hosp <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(Facility) <span class="sc">%&gt;%</span> <span class="fu">slice</span>(<span class="dv">1</span>) <span class="sc">%&gt;%</span> <span class="fu">ungroup</span>()</span>
<span id="cb6-56"><a href="#cb6-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-57"><a href="#cb6-57" aria-hidden="true" tabindex="-1"></a><span class="co"># labels for leaflet mapping</span></span>
<span id="cb6-58"><a href="#cb6-58" aria-hidden="true" tabindex="-1"></a>hosp_labs <span class="ot">&lt;-</span> <span class="fu">sprintf</span>(<span class="st">"%s"</span>, hosp<span class="sc">$</span>Facility) <span class="sc">%&gt;%</span> <span class="fu">lapply</span>(htmltools<span class="sc">::</span>HTML)</span>
<span id="cb6-59"><a href="#cb6-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-60"><a href="#cb6-60" aria-hidden="true" tabindex="-1"></a><span class="co"># add leaflet colour palette based on health authority</span></span>
<span id="cb6-61"><a href="#cb6-61" aria-hidden="true" tabindex="-1"></a>chsa_pal <span class="ot">&lt;-</span> <span class="fu">colorFactor</span>(<span class="st">'RdYlBu'</span>, chsa<span class="sc">$</span>HA_ID)</span>
<span id="cb6-62"><a href="#cb6-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-63"><a href="#cb6-63" aria-hidden="true" tabindex="-1"></a><span class="co"># labels leaflet for mapping</span></span>
<span id="cb6-64"><a href="#cb6-64" aria-hidden="true" tabindex="-1"></a>chsa_labels <span class="ot">&lt;-</span> <span class="fu">sprintf</span>(<span class="st">"%s (%s)"</span>, chsa<span class="sc">$</span>CHSA_Title, chsa<span class="sc">$</span>HA_Name) <span class="sc">%&gt;%</span> </span>
<span id="cb6-65"><a href="#cb6-65" aria-hidden="true" tabindex="-1"></a>  <span class="fu">lapply</span>(htmltools<span class="sc">::</span>HTML)</span>
<span id="cb6-66"><a href="#cb6-66" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-67"><a href="#cb6-67" aria-hidden="true" tabindex="-1"></a><span class="do">### plot CHSA shapes plus hospitals</span></span>
<span id="cb6-68"><a href="#cb6-68" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-69"><a href="#cb6-69" aria-hidden="true" tabindex="-1"></a><span class="fu">leaflet</span>() <span class="sc">%&gt;%</span></span>
<span id="cb6-70"><a href="#cb6-70" aria-hidden="true" tabindex="-1"></a>  <span class="fu">addTiles</span>() <span class="sc">%&gt;%</span></span>
<span id="cb6-71"><a href="#cb6-71" aria-hidden="true" tabindex="-1"></a>  <span class="fu">addProviderTiles</span>(providers<span class="sc">$</span>CartoDB.Positron) <span class="sc">%&gt;%</span></span>
<span id="cb6-72"><a href="#cb6-72" aria-hidden="true" tabindex="-1"></a>  <span class="do">## some arguments are not working...</span></span>
<span id="cb6-73"><a href="#cb6-73" aria-hidden="true" tabindex="-1"></a>  <span class="co"># addPolygons(data = chsa,</span></span>
<span id="cb6-74"><a href="#cb6-74" aria-hidden="true" tabindex="-1"></a>  <span class="co">#             fillColor = ~chsa_pal(HA_ID),</span></span>
<span id="cb6-75"><a href="#cb6-75" aria-hidden="true" tabindex="-1"></a>  <span class="co">#             stroke = T, weight = 1,</span></span>
<span id="cb6-76"><a href="#cb6-76" aria-hidden="true" tabindex="-1"></a>  <span class="co">#             opacity = 10, color = "#666", dashArray = "1", fillOpacity = 0.1,</span></span>
<span id="cb6-77"><a href="#cb6-77" aria-hidden="true" tabindex="-1"></a>  <span class="co">#             label = chsa_labels,</span></span>
<span id="cb6-78"><a href="#cb6-78" aria-hidden="true" tabindex="-1"></a>  <span class="co">#             highlight = highlightOptions(</span></span>
<span id="cb6-79"><a href="#cb6-79" aria-hidden="true" tabindex="-1"></a>  <span class="co">#               weight = 1.5, color = "black", dashArray = "",fillOpacity = 0.3,</span></span>
<span id="cb6-80"><a href="#cb6-80" aria-hidden="true" tabindex="-1"></a>  <span class="co">#               bringToFront = F)</span></span>
<span id="cb6-81"><a href="#cb6-81" aria-hidden="true" tabindex="-1"></a>  <span class="co">#             ) %&gt;%</span></span>
<span id="cb6-82"><a href="#cb6-82" aria-hidden="true" tabindex="-1"></a>  <span class="do">## add circles after polygons so that they are plotted on top</span></span>
<span id="cb6-83"><a href="#cb6-83" aria-hidden="true" tabindex="-1"></a>  <span class="fu">addCircles</span>(<span class="at">data =</span> hosp, <span class="sc">~</span>LONGITUDE, <span class="sc">~</span>LATITUDE,</span>
<span id="cb6-84"><a href="#cb6-84" aria-hidden="true" tabindex="-1"></a>             <span class="at">label =</span> <span class="sc">~</span>hosp_labs, <span class="at">popup =</span> <span class="sc">~</span>hosp_labs,</span>
<span id="cb6-85"><a href="#cb6-85" aria-hidden="true" tabindex="-1"></a>             <span class="at">opacity =</span> <span class="dv">1</span>, <span class="at">radius =</span> <span class="dv">10</span>, <span class="at">stroke =</span> T,</span>
<span id="cb6-86"><a href="#cb6-86" aria-hidden="true" tabindex="-1"></a>             <span class="at">highlightOptions =</span> <span class="fu">highlightOptions</span>(<span class="at">bringToFront =</span> T)</span>
<span id="cb6-87"><a href="#cb6-87" aria-hidden="true" tabindex="-1"></a>             )</span>
<span id="cb6-88"><a href="#cb6-88" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-89"><a href="#cb6-89" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb6-90"><a href="#cb6-90" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-91"><a href="#cb6-91" aria-hidden="true" tabindex="-1"></a><span class="fu">### CHSA Table</span></span>
<span id="cb6-92"><a href="#cb6-92" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-95"><a href="#cb6-95" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb6-96"><a href="#cb6-96" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: dt-chsa</span></span>
<span id="cb6-97"><a href="#cb6-97" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb6-98"><a href="#cb6-98" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-99"><a href="#cb6-99" aria-hidden="true" tabindex="-1"></a>chsa <span class="sc">%&gt;%</span> </span>
<span id="cb6-100"><a href="#cb6-100" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(CHSA_Name, HA_Name, CHSA_Pop16, CHSA_UR_Cl) <span class="sc">%&gt;%</span> </span>
<span id="cb6-101"><a href="#cb6-101" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tibble</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb6-102"><a href="#cb6-102" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>geometry) <span class="sc">%&gt;%</span> </span>
<span id="cb6-103"><a href="#cb6-103" aria-hidden="true" tabindex="-1"></a>  <span class="fu">datatable</span>(<span class="at">filter =</span> <span class="st">'top'</span>)</span>
<span id="cb6-104"><a href="#cb6-104" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-105"><a href="#cb6-105" aria-hidden="true" tabindex="-1"></a><span class="co"># distances %&gt;% </span></span>
<span id="cb6-106"><a href="#cb6-106" aria-hidden="true" tabindex="-1"></a><span class="co">#   select(CHSA_Name, Facility, distance, duration, HA_Name, CHSA_UR_Cl) %&gt;% </span></span>
<span id="cb6-107"><a href="#cb6-107" aria-hidden="true" tabindex="-1"></a><span class="co">#   datatable(., filter = 'top')</span></span>
<span id="cb6-108"><a href="#cb6-108" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-109"><a href="#cb6-109" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb6-110"><a href="#cb6-110" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-111"><a href="#cb6-111" aria-hidden="true" tabindex="-1"></a><span class="fu">## CHSA to Hospital Distances</span></span>
<span id="cb6-112"><a href="#cb6-112" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-115"><a href="#cb6-115" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb6-116"><a href="#cb6-116" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-correlations</span></span>
<span id="cb6-117"><a href="#cb6-117" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: Correlations between distance and CHSA characteristics</span></span>
<span id="cb6-118"><a href="#cb6-118" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb6-119"><a href="#cb6-119" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-120"><a href="#cb6-120" aria-hidden="true" tabindex="-1"></a><span class="co"># # correlations - dist v. dur, dist v. CHSA pop/area</span></span>
<span id="cb6-121"><a href="#cb6-121" aria-hidden="true" tabindex="-1"></a><span class="co"># distances %&gt;% </span></span>
<span id="cb6-122"><a href="#cb6-122" aria-hidden="true" tabindex="-1"></a><span class="co">#   select(HA_Name, duration, distance, dist.hav, CHSA_Pop16, CHSA_Area) %&gt;% </span></span>
<span id="cb6-123"><a href="#cb6-123" aria-hidden="true" tabindex="-1"></a><span class="co">#   mutate(CHSA_dens = CHSA_Pop16 / CHSA_Area) %&gt;% </span></span>
<span id="cb6-124"><a href="#cb6-124" aria-hidden="true" tabindex="-1"></a><span class="co">#   ggpairs(columns = 2:7, mapping = aes(color = HA_Name),</span></span>
<span id="cb6-125"><a href="#cb6-125" aria-hidden="true" tabindex="-1"></a><span class="co">#           diag = list(continuous = wrap('densityDiag', alpha = 0.3)),</span></span>
<span id="cb6-126"><a href="#cb6-126" aria-hidden="true" tabindex="-1"></a><span class="co">#           lower = list(continuous = wrap("smooth", alpha = 0.3, size = 0.1, se = F)))</span></span>
<span id="cb6-127"><a href="#cb6-127" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-128"><a href="#cb6-128" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->



</body></html>